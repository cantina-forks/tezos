# This file was automatically generated, do not edit.
# Edit file ci/bin/main.ml instead.

publish:documentation:
  image: ${build_deps_image_name}:runtime-build-test-dependencies--${build_deps_image_version}
  stage: doc
  tags:
  - gcp
  rules:
  - changes:
    - scripts/**/*/
    - script-inputs/**/*/
    - src/**/*
    - tezt/**/*
    - vendors/**/*
    - dune
    - dune-project
    - dune-workspace
    - docs/**/*
    - .gitlab/**/*
    - .gitlab-ci.yml
    when: on_success
  needs: []
  dependencies: []
  interruptible: false
  before_script:
  - eval $(opam env)
  - . $HOME/.venv/bin/activate
  - echo "${CI_PK_GITLAB_DOC}" > ~/.ssh/id_ed25519
  - echo "${CI_KH}" > ~/.ssh/known_hosts
  - chmod 400 ~/.ssh/id_ed25519
  script:
  - ./scripts/ci/doc_publish.sh
